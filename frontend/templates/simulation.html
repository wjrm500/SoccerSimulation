{% extends 'rest_of_website.html' %}
{% block content %}
<div id="main">
    <div class="half-container">
        <div id="always-data-container" class="data-container">
            <div id="grid-item-standings" class="grid-item">
                <div class="grid-item-title">
                    Standings
                </div>
                <div class="grid-item-content">
                    <table id="league-table">
                        <tr>
                            <th>Rank</th>
                            <th>Name</th>
                            <th>W</th>
                            <th>D</th>
                            <th>L</th>
                            <th>GF</th>
                            <th>GA</th>
                            <th>GD</th>
                            <th>Pts</th>
                        </tr>
                        {% for leagueTableItem in leagueTableItems %}
                            <tr>
                                <td>{{ loop.index }}</td>
                                <td>
                                    <!-- <span style="color:#aaaaaa; display:inline-block; font-size:0.9em; font-weight:normal; width:40px">({{ leagueTableItem[0].getShortName() }})</span> -->
                                    {{ leagueTableItem[0].name}}</td>
                                <td>{{ leagueTableItem[1]['W'] }}</td>
                                <td>{{ leagueTableItem[1]['D'] }}</td>
                                <td>{{ leagueTableItem[1]['L'] }}</td>
                                <td>{{ leagueTableItem[1]['GF'] }}</td>
                                <td>{{ leagueTableItem[1]['GA'] }}</td>
                                <td>{{ leagueTableItem[1]['GD'] }}</td>
                                <td>{{ leagueTableItem[1]['Pts'] }}</td>
                            </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
            <div id="grid-item-performance" class="grid-item">
                <div class="grid-item-title">
                    Player Performance
                </div>
                <div class="grid-item-content">
                    <table id="player-performance-table">
                        <tr>
                            <th>#</th>
                            <th>Name</th>
                            <th>Games</th>
                            <th>Goals</th>
                            <th>Assists</th>
                            <th>Rating</th>
                        </tr>
                        {% for player, performanceIndices in playerPerformanceItems.items() %}
                            <tr>
                                <td>{{ loop.index }}</td>
                                <td>
                                    <div class="player-row-top">
                                        {{ player.getProperName() }}
                                    </div>
                                    <div class="player-row-bottom">
                                        <span>{{ player.club.name }}</span>,
                                        <span>{{ player.getAge() }}</span>,
                                        <span>{{ player.getBestPosition() }}</span>
                                    </div>
                                </td>
                                <td>{{ performanceIndices['games'] }}</td>
                                <td>{{ performanceIndices['goals'] }}</td>
                                <td>{{ performanceIndices['assists'] }}</td>
                                <td>{{ performanceIndices['performanceIndex'] }}</td>
                            </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
            <div id="grid-item-results" class="grid-item">
                <div class="grid-item-title">
                    Results
                </div>
                <div class="grid-item-content">
                    <table id="results">
                        <tr>
                            <td></td>
                            <td class="middle-bit""></td>
                            <td class="middle-bit"></td>
                            <td class="middle-bit"></td>
                            <td></td>
                        </tr>
                        {% for key, value in dates.items() %}
                            <tr>
                                <td class="result-date" colspan="5">{{ key.strftime('%d %B %Y') }}</td>
                            </tr>
                            {% for result in value %}
                                <tr class="result">
                                    <td class="result-home-club-name result-club-name {% if result['homeScore'] > result['awayScore'] %}winner{% endif %}">
                                        {{ result['homeClub'].name }}
                                    </td>
                                    <td class="middle-bit result-home-club-score result-club-score {% if result['homeScore'] > result['awayScore'] %}winner{% endif %}">
                                        {{ result['homeScore'] }}
                                    </td>
                                    <td class="middle-bit result-score-dash result-club-score">-</td>
                                    <td class="middle-bit result-away-club-score result-club-score {% if result['homeScore'] < result['awayScore'] %}winner{% endif %}">
                                        {{ result['awayScore'] }}
                                    </td>
                                    <td class="result-away-club-name result-club-name {% if result['homeScore'] < result['awayScore'] %}winner{% endif %}">
                                        {{ result['awayClub'].name }}
                                    </td>
                                </tr>
                            {% endfor %}
                            <tr>
                                <td colspan="5"></td>
                            </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="half-container">
        <div id="sometimes-data-container" class="data-container">
            <div id="sometimes-data-initial-text">
                Click on Standings, Results, Player Performance, or any Club, Result or Player to populate this panel with information
            </div>
        </div>
    </div>
</div>
    
{% endblock %}